* {
    padding: 0;
    margin: 0;
}

body {
    font-family : 'Great Vibes', cursive;
    background-color : #f7ede3;
}

h2 {
    font-size: 2.0rem;
    color : darkslategrey;
}

#calendar-container {
    max-width: 420px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background-color: #27272a;
}

#calendar-container::after {
    content : '';
    position : absolute;
    inset : 0;
    pointer-events : none;
    background : 
        radial-gradient( white 1px, transparent 2px ),
        radial-gradient( white 1.5px, transparent 2.5px ),
        radial-gradient( white 2px, transparent 3px );
    background-size : 80px 80px, 60px 60px, 40px 40px;
    animation :
        snow_layer1 15s linear infinite,
        snow_layer1 10s linear infinite,
        snow_layer3  7s linear infinite;
    opacity : .15;
}

@keyframes snow_layer1 {
    from { background-position : 0 0, 0 0, 0 0; }
    to { background-position : 80px 800px, 80px 800px, 80px 800px;}
}
@keyframes snow_layer2 {
    from { background-position : 0 0, 0 0, 0 0; }
    to { background-position : -60px 600px, -60px 600px, -60px 600px; }
}
@keyframes snow_layer3 {
    from { background-position : 0 0, 0 0, 0 0; }
    to { background-position : 0 400px, 0 400px, 0 400px; }
}

#tree-bg {
    background : linear-gradient(
        to top,
        #10b981 0%,
        #059669 50%,
        #047857 100%
    );
    transform : scaleX( 1.1 );
    filter : brightness( 1.2 );
    z-index : 0;
    top : 20px;
    bottom : -50px;
    left : -10%;
    right : -10%;
}

#doors-grid {
    min-height : 90vh;
    max-width: 100vw;
    overflow-y : scroll;
    flex-grow : 1;
    padding-bottom : 80px;
    padding-top : 80px;
    scrollbar-width : none;
    -ms-overflow-style : none;
    position : relative;
}
#doors-grid::-webkit-scrollbar { display : none; }

.door-wrapper {
    position: relative;
    flex-direction : column;
    align-items : flex-start;
    width: 80vw;
    /*
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    */
}
/*
.door-wrapper.align-right { align-items : flex-end; }
.door-wrapper.align-center { align-items : center; }
*/

.door:nth-child( even ) { background-color : #10b981; }
.door-wrapper:nth-child( 25 ) { transform : translateX( 15% ); }
.door-wrapper:nth-child( 24 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child( 23 ) { transform : translateX( 20% ); }
.door-wrapper:nth-child( 22 ) { transform : translateX( 15% ); }
.door-wrapper:nth-child( 21 ) { transform : translateX( 10% ); }
.door-wrapper:nth-child( 20 ) { transform : translateX( 35% ); }
.door-wrapper:nth-child( 19 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child( 18 ) { transform : translateX(  5% ); }
.door-wrapper:nth-child( 17 ) { transform : translateX(  5% ); }
.door-wrapper:nth-child( 16 ) { transform : translateX( 25% ); }
.door-wrapper:nth-child( 15 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child( 14 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child( 13 ) { transform : translateX( 15% ); }
.door-wrapper:nth-child( 12 ) { transform : translateX( 20% ); }
.door-wrapper:nth-child( 11 ) { transform : translateX( 25% ); }
.door-wrapper:nth-child( 10 ) { transform : translateX( 10% ); }
.door-wrapper:nth-child(  9 ) { transform : translateX(  5% ); }
.door-wrapper:nth-child(  8 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child(  7 ) { transform : translateX( 10% ); }
.door-wrapper:nth-child(  6 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child(  5 ) { transform : translateX( 20% ); }
.door-wrapper:nth-child(  4 ) { transform : translateX( 15% ); }
.door-wrapper:nth-child(  3 ) { transform : translateX( 30% ); }
.door-wrapper:nth-child(  2 ) { transform : translateX( 25% ); }
.door-wrapper:nth-child(  1 ) { transform : translateX(  5% ); }

.door { 
    transition : all 0.3s ease-in-out;
    cursor : pointer;
    width : 70px;
    height : 70px;
    border-radius : 8px;
    box-shadow : 0 8px 15px -3px rgba( 0, 0, 0, 0.7 ) 0 4px 6px -4px rgba( 0, 0, 0, 0.5 );
    border : 4px solid #f8fafc;
    background-color : #dc2626;
    background-image : 
        linear-gradient( rgba( 255, 255, 255, .1 ) 1px, transparent 1px ),
        linear-gradient( 90deg, rgba( 255, 255, 255, .1 ) 1px, transparent 1px );
    background-size : 20px 20px;
    transform-origin : center;
    position : relative;
    z-index : 10;
}
.door::marker { display : none; }
.door::before {
    content : '';
    position : absolute;
    width : 100%;
    height : 10px;
    background : rgba( 255, 255, 255, 0.85 );
    top : 50%;
    transform : translateY( -50% );
}
.door::after { 
    content : '';
    position : absolute;
    height : 100%;
    width : 10px;
    background : rgba( 255, 255, 355, 0.85 );
    left : 50%;
    transform : translateX( -50% );
}

.door:hover .shine { opacity : 1; }
.door:hover:not( .locked ) { transform: scale( 1.05 ) rotate( -3deg ); }

.door span.bow {
    position: absolute;
    top: -8px;
    left: 50%;
    width: 26px;
    height: 10px;
    transform: translateX(-50%);
    z-index: 12;
}
.door span.bow::before,
.door span.bow::after {
    content: '';
    position: absolute;
    width: 14px;
    height: 10px;
    background: #f8fafc;
    border-radius: 8px 8px 0 0;
    top: 0;
}
.door span.bow::before {
    left: -12px;
    transform: rotate(-25deg);
}
.door span.bow::after {
    right: -12px;
    transform: rotate(25deg);
}
.door span.bow {
    background : #f8fafc;
    border-radius: 50%;
    height: 10px;
    width: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,.3);
}

.door .shine {
    position : absolute;
    inset : 0;
    background : linear-gradient( 120deg, transparent 30%, rgba( 255, 255, 255, 0.3 ), transparent 70% );
    opacity : 0;
    transition : .3s;
}

.door.locked {
    filter : grayscale( 80% ) opacity( 50% );
    cursor : not-allowed;
    transform : none !important;
    background : repeating-linear-gradient(
        45deg,
        rgba( 255, 255, 255, .1 ),
        rgba( 255, 255, 255, .1 ) 10px,
        rgba( 255, 255, 255, .05 ) 10px,
        rgba( 255, 255, 255, .05 ) 20px 
    ) #475569;
}

.door.opened { 
    opacity : 1;
    position : relative;
    background : linear-gradient( 130deg, #cbd3e1, #64748b );
    color : #1f2937;
    box-shadow : inset 0 0 10px rgba( 0, 0, 0, 0.3 );
    filter: grayscale( 0% ) opacity( 90% );
    transform : rotate( -10deg ) scale( 0.9 );
    cursor : default;
    z-index : 5;
}
.door.opened::after,
.door.opened::before { 
    background : #b45309 !important;
    opacity : 0.5;
}
.door.shaking { animation : door-shake 0.4s; }

@keyframes door-shake {
    0% { transform : translateX( 0 ) rotate( 0deg ); }
    20% { transform : translateX( -2px ) rotate( -1deg ); }
    40% { transform : translateX( 2px ) rotate( 1deg ); }
    60% { transform : translateX( -2px ) rotate( -1deg ); }
    80% { transform : translateX( 2px ) rotate( 1deg ); }
    100% { transform : translateX( 0 ) rotate( 0deg ); }
}

.ribbon {
    position : absolute;
    inset : 0;
    pointer-events : none;
    z-index : 15;
}
.ribbon-v, .ribbon-h {
    position : absolute;
    background : linear-gradient( to bottom, #fff, #e5e7eb );
}
.ribbon-v {
    width : 8px;
    height : 100%;
    left : 50%;
    transform : translateX( -50% );
}
.ribbon-h {
    height : 8px;
    width : 100%;
    top : 50%;
    transform : translateY( -50% );
}
.ribbon.tear .ribbon-v { animation: tear-verrical 0.5s ease forwards; }
.ribbon.tear .ribbon-h { animation: tear-horizontal 0.5s ease forwards; }

@keyframes tear-verrical {
    to {
        transform : translateX( -50% ) scaleY( 0 );
        opacity : 0;
    }
}
@keyframes tear-horizontal {
    to {
        transform : translateY( -50% ) scaleX( 0 );
        opacity : 0;
    }
}

h2.door-day { 
    z-index : 60;
    font-size: 2.0em;
    text-shadow: 
        -1px -1px 0 #e5e7eb,
         1px -1px 0 #e5e7eb,
        -1px  1px 0 #e5e7eb,
         1px  1px 0 #e5e7eb;
}

.persistent-card {
    background: linear-gradient(#fef9f2, #fdf4e7), url('data:image/svg+xml,...');
    background-color: #fcf8f0;
    background-image: repeating-linear-gradient(90deg,#F5F5DC 0 8px,transparent 8px 12px) 20;
    background-repeat: no-repeat;
    background-size: 80% 80%;
    background-position: center center;
    animation: reveal-glow .6s ease;
    border: 4px dashed #F5F5DC;
    width: 80vw;
    margin-top: 10px;
    margin-bottom: 20px;
    padding: 1rem;
    border-radius: 12px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
    position: relative;
    z-index: 20;
    transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), clip-path 0.8s cubic-bezier(0.25, 1, 0.5, 1);
    transform: translateX( 0 );
    opacity: 1;
    box-sizing: border-box;
    overflow-wrap: break-word;
}
.persistent-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        rgba(0, 0, 0, 0.05),
        transparent 20%,
        rgba(0, 0, 0, 0.08)
    );
    pointer-events:none;
}
.persistent-card::after {
    content:'';
    position:absolute;
    right:0;
    bottom:0;
    width:30px;
    height:30px;
    background: radial-gradient(circle, rgba(0,0,0,.4), transparent 70%);
    transform: rotate(20deg);
    opacity:.2;
}

@keyframes reveal-glow {
    0% { box-shadow: 0 0 0 rgba( 255, 215, 0, 0 );}
    50% { box-shadow: 0 0 25px rgba( 255, 215, 0, .6 );}
    100% { box-shadow: 0 10px 20px rgba( 0, 0, 0, .4 );}
}

.persistent-card h2 { 
    font-size: 2.0em;
    line-height: 1.5em;
}
.persistent-card p {
    font-size: 1.5em;
    font-weight: bold; 
}
.persistent-card .author {
    display: block;
    text-align: right;
    font-style: italic;
    opacity: 0.75;
}

.initial-animation-state.from-left {
    transform: translateX(-100vw);
    opacity: 0;
}

.initial-animation-state.from-right {
    transform: translateX(100vw);
    opacity: 0;
}




.door-wrapper.align-right .persistent-card {
    margin-left: auto;
    margin-right: 0;
    transform-origin: right center;
}

.door-wrapper.align-left .persistent-card {
    margin-right: auto;
    margin-left: 0;
    transform-origin: left center;
}

.door-wrapper.align-center .persistent-card {
    margin-left: auto;
    margin-right: auto;
    transform-origin: center center;
}

